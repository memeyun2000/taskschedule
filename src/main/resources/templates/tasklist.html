<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <h1>任务监控</h1>
    <table >
        <tr>
            <td>
                <span th:text="*{statDtBegin}"></span>
            </td>
            <td>
                <span th:text="*{statDtEnd}"></span>
            </td>
        </tr>

    </table>
    <form action="#" id="form1" th:action="@{/updateTaskStatus}" method="post">
        <table th:object="${taskFactModel}">
            <tr>
                <td>
                    任务日期：<input type="text" name="statDtBegin" th:value="*{statDtBegin}"/> 至<input type="text" name="statDtEnd" th:value="*{statDtEnd}"/>
                </td>
                <td>

                </td>
            </tr>
            <tr>
                <td>
                    任务id：<input type="text" name="taskId" th:value="*{id.taskId}"/>
                </td>
                <td>
                    任务状态：<input type="text" name="status" th:value="*{status}"/>
                </td>
            </tr>
            <tr>
                <td>
                    任务类型：<input type="text" name="taskType" th:value="*{taskType}"/>
                </td>
                <td>
                    任务粒度：<input type="text" name="granularity" th:value="*{granularity}"/>
                </td>
            </tr>
        </table>
        <input type="button" onclick="setstate()" value="重新计算" />
        <input type="text" name="submitStatus" value="2"/>
        <!-- <table border="1" style="border: 1px solid">
            <thead>
                <th><span><a href="#" onclick="selectAll()">全选</a> &nbsp;<a href="#" onclick="unselectAll()">取消</a></span></th>
                <th>数据日期</th>
                <th>任务id</th>
                <th>任务类型</th>
                <th>计算开始时间</th>
                <th>计算结束时间</th>
                <th>允许计算时间</th>
                <th>创建时间</th>
                <th>任务状态</th>
            </thead>
            <tbody th:each="task,taskstat:${tasklist}">
                <tr>
                    <td>
                        <input type="checkbox" name="checkboxid" class="checkboxid" th:value="${task.id.taskId}" />
                        <input type="hidden" name="checkboxstatdt" th:value="${task.id.statDt}"/>
                    </td>
                    <td>
                        <span th:text="${task.id.statDt}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.id.taskId}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.taskType}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.calBeginTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.calEndTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.allowCalTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.createtime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.status}" ></span>
                    </td>
                </tr>
            </tbody>
        </table> -->

        <table border="1" style="border: 1px solid">
            <thead>
                <th><span><a href="#" onclick="selectAll()">全选</a> &nbsp;<a href="#" onclick="unselectAll()">取消</a></span></th>
                <th>数据日期</th>
                <th>任务id</th>
                <th>任务类型</th>
                <th>计算开始时间</th>
                <th>计算结束时间</th>
                <th>允许计算时间</th>
                <th>创建时间</th>
                <th>任务状态</th>
            </thead>
            <tbody th:each="task,taskstat:${taskFactPage}">
                <tr>
                    <td>
                        <input type="checkbox" name="checkboxid" class="checkboxid" th:value="${task.id.taskId}" />
                        <input type="hidden" name="checkboxstatdt" th:value="${task.id.statDt}"/>
                        <!-- <input type="hidden" name="id" th:value="${task.id}" /> -->
                    </td>
                    <td>
                        <span th:text="${task.id.statDt}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.id.taskId}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.taskType}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.calBeginTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.calEndTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.allowCalTime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.createtime}" ></span>
                    </td>
                    <td>
                        <span th:text="${task.status}" ></span>
                    </td>
                </tr>
            </tbody>
        </table>
        <div th:object="${pageInfo}">
            第<input type="text"/>页
            <input type="text"  th:value="*{pageNum}"/>
            总页数：<input type="text" th:value="*{pageSize}"/>
        </div>
        
    </form>
    <script th:inline="javascript" type="text/javascript">
        document.onkeydown = function (e) {
            if(!e) {
                e = windows.event;
            }
            if(( e.keyCode || e.which ) == 13) {
                search();
            }
        }
        function search() {
            document.getElementById("form1").action = "/tasklist";
            document.getElementById("form1").submit();
        }
        function setstate(){
            document.getElementById("form1").action = "/updateTaskStatus";
            document.getElementById("form1").submit();
        }
        function selectAll() {
            var checkboxObjs = document.getElementsByName("checkboxid");
            /*<![CDATA[*/for(var i=0 ; i < checkboxObjs.length ; i++) {/*]]>*/
                checkboxObjs[i].checked = true;
            }
        }
        function unselectAll() {
            var checkboxObjs = document.getElementsByName("checkboxid");
            /*<![CDATA[*/for(var i=0 ; i < checkboxObjs.length ; i++) {/*]]>*/
                checkboxObjs[i].checked = false;
            }
        }
    </script>
</body>

</html>